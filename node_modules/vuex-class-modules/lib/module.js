var __spreadArrays = (this && this.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};
import { VuexClassModuleFactory } from "./module-factory";
export function Module(arg) {
    if (typeof arg === "function") {
        return moduleDecoratorFactory()(arg);
    }
    else {
        return moduleDecoratorFactory(arg);
    }
}
function moduleDecoratorFactory(moduleOptions) {
    return function (constructor) {
        var accessor = function () {
            var _a;
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var instance = new ((_a = constructor.prototype.constructor).bind.apply(_a, __spreadArrays([void 0], args)))();
            Object.setPrototypeOf(instance, accessor.prototype);
            var factory = new VuexClassModuleFactory(constructor, instance, moduleOptions || {});
            factory.registerVuexModule();
            return factory.buildAccessor();
        };
        accessor.prototype = Object.create(constructor.prototype);
        accessor.prototype.constructor = accessor;
        return accessor;
    };
}
